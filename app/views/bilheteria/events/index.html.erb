<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Sistema de Bilheteria - Eventos</h1>
    <%= link_to 'Novo Evento', new_bilheteria_event_path, class: 'btn btn-primary' %>
  </div>

  <div class="row mb-4">
    <div class="col-md-6">
      <%= form_with url: bilheteria_events_path, method: :get, local: true, class: 'd-flex' do |form| %>
        <%= form.text_field :search, placeholder: 'Buscar eventos...', value: params[:search], class: 'form-control me-2' %>
        <%= form.submit 'Buscar', class: 'btn btn-outline-secondary' %>
      <% end %>
    </div>
  </div>

  <div class="row">
    <% @events.each do |event| %>
      <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100">
          <div class="card-body">
            <h5 class="card-title"><%= event.name %></h5>
            <p class="card-text">
              <strong>Período:</strong>
              <%= event.start_on&.strftime('%d/%m/%Y') %>
              <% if event.end_on.present? %> – <%= event.end_on.strftime('%d/%m/%Y') %><% end %><br>
              <strong>Local:</strong> <%= event.venue.presence || '-' %><br>
              <strong>Status:</strong> <%= event.status %>
            </p>
            <% if event.description.present? %>
              <p class="card-text"><small class="text-muted"><%= truncate(event.description, length: 100) %></small></p>
            <% end %>
          </div>
          <div class="card-footer">
            <div class="d-flex justify-content-between gap-2">
              <%= link_to 'Ver', bilheteria_event_path(event), class: 'btn btn-sm btn-outline-primary' %>
              <%= link_to 'Ingressos', bilheteria_event_tickets_path(event), class: 'btn btn-sm btn-outline-success' %>
              <%= link_to 'Editar', edit_bilheteria_event_path(event), class: 'btn btn-sm btn-outline-secondary' %>
              <%= link_to 'Portaria', bilheteria_portaria_path(event_id: event.id), class: 'btn btn-sm btn-success' %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <% if @events.empty? %>
    <div class="text-center py-5">
      <h4 class="text-muted">Nenhum evento encontrado</h4>
      <p class="text-muted">Crie seu primeiro evento para começar a vender ingressos!</p>
    </div>
  <% end %>
</div>

<%= form_with(model: [:bilheteria, @event], local: true, class: 'needs-validation', novalidate: true) do |form| %>
  <% if @event.errors.any? %>
    <div class="alert alert-danger">
      <h4><%= pluralize(@event.errors.count, "erro") %> impediram este evento de ser salvo:</h4>
      <ul class="mb-0">
        <% @event.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="row">
    <div class="col-md-8">
      <div class="mb-3">
        <%= form.label :name, "Nome do Evento", class: 'form-label' %>
        <%= form.text_field :name, class: 'form-control', required: true %>
      </div>

      <div class="mb-3">
        <%= form.label :description, "Descrição", class: 'form-label' %>
        <%= form.text_area :description, class: 'form-control', rows: 4 %>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <%= form.label :event_date, "Data e Hora", class: 'form-label' %>
            <%= form.datetime_local_field :event_date, class: 'form-control', required: true %>
          </div>
        </div>
        <div class="col-md-6">
          <div class="mb-3">
            <%= form.label :venue, "Local", class: 'form-label' %>
            <%= form.text_field :venue, class: 'form-control', required: true %>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <%= form.label :max_capacity, "Capacidade Máxima", class: 'form-label' %>
            <%= form.number_field :max_capacity, class: 'form-control', min: 1, required: true %>
          </div>
        </div>
        <div class="col-md-6">
          <div class="mb-3">
            <%= form.label :price, "Preço", class: 'form-label' %>
            <div class="input-group">
              <span class="input-group-text">R$</span>
              <%= form.number_field :price, class: 'form-control', step: 0.01, min: 0, required: true %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card">
        <div class="card-header">
          <h6 class="mb-0">Configurações</h6>
        </div>
        <div class="card-body">
          <div class="mb-3">
            <%= form.label :status, "Status", class: 'form-label' %>
            <%= form.select :status, 
                options_for_select([
                  ['Rascunho', 'draft'],
                  ['Publicado', 'published'],
                  ['Cancelado', 'cancelled']
                ], @event.status), 
                {}, { class: 'form-select' } %>
          </div>

          <div class="form-check">
            <%= form.check_box :active, class: 'form-check-input' %>
            <%= form.label :active, "Evento Ativo", class: 'form-check-label' %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-between">
    <%= link_to 'Cancelar', bilheteria_events_path, class: 'btn btn-secondary' %>
    <%= form.submit class: 'btn btn-primary' %>
  </div>
<% end %>
